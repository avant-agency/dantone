window.AMOPIXEL_IDENTIFIER||(function(){'use strict';window.JSON||(window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(r){if(r instanceof Object){var t="";if(r.constructor===Array){for(var n=0;n<r.length;t+=this.stringify(r[n])+",",n++);return"["+t.substr(0,t.length-1)+"]"}if(r.toString!==Object.prototype.toString)return'"'+r.toString().replace(/"/g,"\\$&")+'"';for(var i in r)t+='"'+i.replace(/"/g,"\\$&")+'":'+this.stringify(r[i])+",";return"{"+t.substr(0,t.length-1)+"}"}return"string"==typeof r?'"'+r.replace(/"/g,"\\$&")+'"':String(r)}});var PIXEL_IDENTIFIER_JS_ID='amo_pixel_identifier_js';var IFRAME_PATH='/pixel/html/identifier_iframe.html';var POST_MESSAGE_ID='pixel_identifier';var Data={base_host:'',visitor_uid:null,callbacks:{onload:function(){}}};var Fn={};Fn.insertIframe=function(base_host){var
first=document.getElementsByTagName('script')[0],iframe=document.createElement('iframe'),data={origin:location.origin};iframe.src=base_host+IFRAME_PATH+'?params='+encodeURIComponent(JSON.stringify(data));iframe.setAttribute('style','display:none!important');first.parentNode.insertBefore(iframe,first);};Fn.handlePostMessage=function(event){var data;if(event.origin!==Data.base_host||!event.data){return;}data=JSON.parse(event.data);if((typeof data!=='object')||data.message_id!==POST_MESSAGE_ID||!data.visitor_uid){return;}window.removeEventListener('message',Fn.handlePostMessage,false);Data.visitor_uid=data.visitor_uid;Data.callbacks.onload(window.AMOPIXEL_IDENTIFIER);};var Identifier=function(){var host,identifier_script=document.getElementById(PIXEL_IDENTIFIER_JS_ID);if(!identifier_script||!identifier_script.src){return;}host=identifier_script.src.match(/(http.+\.\w+)\//);if(!host||!host[1]){return;}Data.base_host=host[1];if(typeof window['postMessage']==='function'){window.addEventListener('message',Fn.handlePostMessage,false);}if(typeof window['AMOPIXEL_IDENTIFIER_PARAMS']==='object'&&window['AMOPIXEL_IDENTIFIER_PARAMS']!==null){if(typeof window['AMOPIXEL_IDENTIFIER_PARAMS']['onload']==='function'){Data.callbacks.onload=window['AMOPIXEL_IDENTIFIER_PARAMS']['onload'];}}Fn.insertIframe(Data.base_host);};Identifier.prototype.getVisitorUid=function(){return Data.visitor_uid;};window.AMOPIXEL_IDENTIFIER=new Identifier();}).call(window);